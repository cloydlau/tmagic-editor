var dr=Object.defineProperty;var lr=(t,n,e)=>n in t?dr(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var m=(t,n,e)=>(lr(t,typeof n!="symbol"?n+"":n,e),e),Ae=(t,n,e)=>{if(!n.has(t))throw TypeError("Cannot "+e)};var R=(t,n,e)=>(Ae(t,n,"read from private field"),e?e.call(t):n.get(t)),W=(t,n,e)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,e)},Z=(t,n,e,r)=>(Ae(t,n,"write to private field"),r?r.call(t,e):n.set(t,e),e);function Mu(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();const pr="modulepreload",gr=function(t){return"/tmagic-editor/playground/runtime/vue3/playground/"+t},je={},Qt=function(n,e,r){let i=Promise.resolve();if(e&&e.length>0){const s=document.getElementsByTagName("link");i=Promise.all(e.map(o=>{if(o=gr(o),o in je)return;je[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let f=s.length-1;f>=0;f--){const _=s[f];if(_.href===o&&(!a||_.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(o,'"]').concat(c)))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":pr,a||(h.as="script",h.crossOrigin=""),h.href=o,document.head.appendChild(h),a)return new Promise((f,_)=>{h.addEventListener("load",f),h.addEventListener("error",()=>_(new Error("Unable to preload CSS for ".concat(o))))})}))}return i.then(()=>n()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ue(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fe={exports:{}},ft=typeof Reflect=="object"?Reflect:null,Ce=ft&&typeof ft.apply=="function"?ft.apply:function(n,e,r){return Function.prototype.apply.call(n,e,r)},xt;ft&&typeof ft.ownKeys=="function"?xt=ft.ownKeys:Object.getOwnPropertySymbols?xt=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:xt=function(n){return Object.getOwnPropertyNames(n)};function mr(t){console&&console.warn&&console.warn(t)}var mn=Number.isNaN||function(n){return n!==n};function O(){O.init.call(this)}fe.exports=O;fe.exports.once=$r;O.EventEmitter=O;O.prototype._events=void 0;O.prototype._eventsCount=0;O.prototype._maxListeners=void 0;var De=10;function Wt(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(O,"defaultMaxListeners",{enumerable:!0,get:function(){return De},set:function(t){if(typeof t!="number"||t<0||mn(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");De=t}});O.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};O.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||mn(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function yn(t){return t._maxListeners===void 0?O.defaultMaxListeners:t._maxListeners}O.prototype.getMaxListeners=function(){return yn(this)};O.prototype.emit=function(n){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i=n==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[n];if(c===void 0)return!1;if(typeof c=="function")Ce(c,this,e);else for(var u=c.length,h=wn(c,u),r=0;r<u;++r)Ce(h[r],this,e);return!0};function vn(t,n,e,r){var i,s,o;if(Wt(e),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",n,e.listener?e.listener:e),s=t._events),o=s[n]),o===void 0)o=s[n]=e,++t._eventsCount;else if(typeof o=="function"?o=s[n]=r?[e,o]:[o,e]:r?o.unshift(e):o.push(e),i=yn(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=n,a.count=o.length,mr(a)}return t}O.prototype.addListener=function(n,e){return vn(this,n,e,!1)};O.prototype.on=O.prototype.addListener;O.prototype.prependListener=function(n,e){return vn(this,n,e,!0)};function yr(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bn(t,n,e){var r={fired:!1,wrapFn:void 0,target:t,type:n,listener:e},i=yr.bind(r);return i.listener=e,r.wrapFn=i,i}O.prototype.once=function(n,e){return Wt(e),this.on(n,bn(this,n,e)),this};O.prototype.prependOnceListener=function(n,e){return Wt(e),this.prependListener(n,bn(this,n,e)),this};O.prototype.removeListener=function(n,e){var r,i,s,o,a;if(Wt(e),i=this._events,i===void 0)return this;if(r=i[n],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[n],i.removeListener&&this.emit("removeListener",n,r.listener||e));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():vr(r,s),r.length===1&&(i[n]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",n,a||e)}return this};O.prototype.off=O.prototype.removeListener;O.prototype.removeAllListeners=function(n){var e,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[n]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[n],typeof e=="function")this.removeListener(n,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(n,e[i]);return this};function $n(t,n,e){var r=t._events;if(r===void 0)return[];var i=r[n];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?br(i):wn(i,i.length)}O.prototype.listeners=function(n){return $n(this,n,!0)};O.prototype.rawListeners=function(n){return $n(this,n,!1)};O.listenerCount=function(t,n){return typeof t.listenerCount=="function"?t.listenerCount(n):_n.call(t,n)};O.prototype.listenerCount=_n;function _n(t){var n=this._events;if(n!==void 0){var e=n[t];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}O.prototype.eventNames=function(){return this._eventsCount>0?xt(this._events):[]};function wn(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t[r];return e}function vr(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}function br(t){for(var n=new Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];return n}function $r(t,n){return new Promise(function(e,r){function i(o){t.removeListener(n,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),e([].slice.call(arguments))}On(t,n,s,{once:!0}),n!=="error"&&_r(t,i,{once:!0})})}function _r(t,n,e){typeof t.on=="function"&&On(t,"error",n,e)}function On(t,n,e,r){if(typeof t.on=="function")r.once?t.once(n,e):t.on(n,e);else if(typeof t.addEventListener=="function")t.addEventListener(n,function i(s){r.once&&t.removeEventListener(n,i),e(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var he=fe.exports;const Sn=ue(he);var wr=typeof global=="object"&&global&&global.Object===Object&&global;const Tn=wr;var Or=typeof self=="object"&&self&&self.Object===Object&&self,Sr=Tn||Or||Function("return this")();const z=Sr;var Tr=z.Symbol;const B=Tr;var En=Object.prototype,Er=En.hasOwnProperty,Mr=En.toString,yt=B?B.toStringTag:void 0;function Ar(t){var n=Er.call(t,yt),e=t[yt];try{t[yt]=void 0;var r=!0}catch(s){}var i=Mr.call(t);return r&&(n?t[yt]=e:delete t[yt]),i}var jr=Object.prototype,Cr=jr.toString;function Dr(t){return Cr.call(t)}var Ir="[object Null]",xr="[object Undefined]",Ie=B?B.toStringTag:void 0;function X(t){return t==null?t===void 0?xr:Ir:Ie&&Ie in Object(t)?Ar(t):Dr(t)}function Y(t){return t!=null&&typeof t=="object"}var Lr="[object Symbol]";function de(t){return typeof t=="symbol"||Y(t)&&X(t)==Lr}function Mn(t,n){for(var e=-1,r=t==null?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}var Pr=Array.isArray;const k=Pr;var Nr=1/0,xe=B?B.prototype:void 0,Le=xe?xe.toString:void 0;function An(t){if(typeof t=="string")return t;if(k(t))return Mn(t,An)+"";if(de(t))return Le?Le.call(t):"";var n=t+"";return n=="0"&&1/t==-Nr?"-0":n}function Q(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function jn(t){return t}var Rr="[object AsyncFunction]",Fr="[object Function]",Ur="[object GeneratorFunction]",Hr="[object Proxy]";function Cn(t){if(!Q(t))return!1;var n=X(t);return n==Fr||n==Ur||n==Rr||n==Hr}var Wr=z["__core-js_shared__"];const Xt=Wr;var Pe=function(){var t=/[^.]+$/.exec(Xt&&Xt.keys&&Xt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Br(t){return!!Pe&&Pe in t}var zr=Function.prototype,qr=zr.toString;function ot(t){if(t!=null){try{return qr.call(t)}catch(n){}try{return t+""}catch(n){}}return""}var Yr=/[\\^$.*+?()[\]{}|]/g,kr=/^\[object .+?Constructor\]$/,Gr=Function.prototype,Kr=Object.prototype,Jr=Gr.toString,Vr=Kr.hasOwnProperty,Zr=RegExp("^"+Jr.call(Vr).replace(Yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qr(t){if(!Q(t)||Br(t))return!1;var n=Cn(t)?Zr:kr;return n.test(ot(t))}function Xr(t,n){return t==null?void 0:t[n]}function at(t,n){var e=Xr(t,n);return Qr(e)?e:void 0}var ti=at(z,"WeakMap");const ne=ti;var Ne=Object.create,ei=function(){function t(){}return function(n){if(!Q(n))return{};if(Ne)return Ne(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const ni=ei;function Dn(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function ri(){}function ii(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}var si=800,oi=16,ai=Date.now;function ci(t){var n=0,e=0;return function(){var r=ai(),i=oi-(r-e);if(e=r,i>0){if(++n>=si)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}function ui(t){return function(){return t}}var fi=function(){try{var t=at(Object,"defineProperty");return t({},"",{}),t}catch(n){}}();const Nt=fi;var hi=Nt?function(t,n){return Nt(t,"toString",{configurable:!0,enumerable:!1,value:ui(n),writable:!0})}:jn;const di=hi;var li=ci(di);const pi=li;function gi(t,n){for(var e=-1,r=t==null?0:t.length;++e<r&&n(t[e],e,t)!==!1;);return t}function mi(t,n,e,r){for(var i=t.length,s=e+(r?1:-1);r?s--:++s<i;)if(n(t[s],s,t))return s;return-1}function yi(t){return t!==t}function vi(t,n,e){for(var r=e-1,i=t.length;++r<i;)if(t[r]===n)return r;return-1}function bi(t,n,e){return n===n?vi(t,n,e):mi(t,yi,e)}function $i(t,n){var e=t==null?0:t.length;return!!e&&bi(t,n,0)>-1}var _i=9007199254740991,wi=/^(?:0|[1-9]\d*)$/;function Bt(t,n){var e=typeof t;return n=n==null?_i:n,!!n&&(e=="number"||e!="symbol"&&wi.test(t))&&t>-1&&t%1==0&&t<n}function In(t,n,e){n=="__proto__"&&Nt?Nt(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function zt(t,n){return t===n||t!==t&&n!==n}var Oi=Object.prototype,Si=Oi.hasOwnProperty;function le(t,n,e){var r=t[n];(!(Si.call(t,n)&&zt(r,e))||e===void 0&&!(n in t))&&In(t,n,e)}function Mt(t,n,e,r){var i=!e;e||(e={});for(var s=-1,o=n.length;++s<o;){var a=n[s],c=r?r(e[a],t[a],a,e,t):void 0;c===void 0&&(c=t[a]),i?In(e,a,c):le(e,a,c)}return e}var Re=Math.max;function Ti(t,n,e){return n=Re(n===void 0?t.length-1:n,0),function(){for(var r=arguments,i=-1,s=Re(r.length-n,0),o=Array(s);++i<s;)o[i]=r[n+i];i=-1;for(var a=Array(n+1);++i<n;)a[i]=r[i];return a[n]=e(o),Dn(t,this,a)}}function pe(t,n){return pi(Ti(t,n,jn),t+"")}var Ei=9007199254740991;function ge(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ei}function At(t){return t!=null&&ge(t.length)&&!Cn(t)}function xn(t,n,e){if(!Q(e))return!1;var r=typeof n;return(r=="number"?At(e)&&Bt(n,e.length):r=="string"&&n in e)?zt(e[n],t):!1}function Mi(t){return pe(function(n,e){var r=-1,i=e.length,s=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&xn(e[0],e[1],o)&&(s=i<3?void 0:s,i=1),n=Object(n);++r<i;){var a=e[r];a&&t(n,a,r,s)}return n})}var Ai=Object.prototype;function qt(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Ai;return t===e}function ji(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}var Ci="[object Arguments]";function Fe(t){return Y(t)&&X(t)==Ci}var Ln=Object.prototype,Di=Ln.hasOwnProperty,Ii=Ln.propertyIsEnumerable,xi=Fe(function(){return arguments}())?Fe:function(t){return Y(t)&&Di.call(t,"callee")&&!Ii.call(t,"callee")};const Yt=xi;function Li(){return!1}var Pn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ue=Pn&&typeof module=="object"&&module&&!module.nodeType&&module,Pi=Ue&&Ue.exports===Pn,He=Pi?z.Buffer:void 0,Ni=He?He.isBuffer:void 0,Ri=Ni||Li;const me=Ri;var Fi="[object Arguments]",Ui="[object Array]",Hi="[object Boolean]",Wi="[object Date]",Bi="[object Error]",zi="[object Function]",qi="[object Map]",Yi="[object Number]",ki="[object Object]",Gi="[object RegExp]",Ki="[object Set]",Ji="[object String]",Vi="[object WeakMap]",Zi="[object ArrayBuffer]",Qi="[object DataView]",Xi="[object Float32Array]",ts="[object Float64Array]",es="[object Int8Array]",ns="[object Int16Array]",rs="[object Int32Array]",is="[object Uint8Array]",ss="[object Uint8ClampedArray]",os="[object Uint16Array]",as="[object Uint32Array]",A={};A[Xi]=A[ts]=A[es]=A[ns]=A[rs]=A[is]=A[ss]=A[os]=A[as]=!0;A[Fi]=A[Ui]=A[Zi]=A[Hi]=A[Qi]=A[Wi]=A[Bi]=A[zi]=A[qi]=A[Yi]=A[ki]=A[Gi]=A[Ki]=A[Ji]=A[Vi]=!1;function cs(t){return Y(t)&&ge(t.length)&&!!A[X(t)]}function ye(t){return function(n){return t(n)}}var Nn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vt=Nn&&typeof module=="object"&&module&&!module.nodeType&&module,us=vt&&vt.exports===Nn,te=us&&Tn.process,fs=function(){try{var t=vt&&vt.require&&vt.require("util").types;return t||te&&te.binding&&te.binding("util")}catch(n){}}();const lt=fs;var We=lt&&lt.isTypedArray,hs=We?ye(We):cs;const Rn=hs;var ds=Object.prototype,ls=ds.hasOwnProperty;function Fn(t,n){var e=k(t),r=!e&&Yt(t),i=!e&&!r&&me(t),s=!e&&!r&&!i&&Rn(t),o=e||r||i||s,a=o?ji(t.length,String):[],c=a.length;for(var u in t)(n||ls.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Bt(u,c)))&&a.push(u);return a}function Un(t,n){return function(e){return t(n(e))}}var ps=Un(Object.keys,Object);const gs=ps;var ms=Object.prototype,ys=ms.hasOwnProperty;function Hn(t){if(!qt(t))return gs(t);var n=[];for(var e in Object(t))ys.call(t,e)&&e!="constructor"&&n.push(e);return n}function kt(t){return At(t)?Fn(t):Hn(t)}function vs(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var bs=Object.prototype,$s=bs.hasOwnProperty;function _s(t){if(!Q(t))return vs(t);var n=qt(t),e=[];for(var r in t)r=="constructor"&&(n||!$s.call(t,r))||e.push(r);return e}function Gt(t){return At(t)?Fn(t,!0):_s(t)}var ws=Mi(function(t,n,e,r){Mt(n,Gt(n),t,r)});const Be=ws;var Os=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ss=/^\w*$/;function Ts(t,n){if(k(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||de(t)?!0:Ss.test(t)||!Os.test(t)||n!=null&&t in Object(n)}var Es=at(Object,"create");const $t=Es;function Ms(){this.__data__=$t?$t(null):{},this.size=0}function As(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var js="__lodash_hash_undefined__",Cs=Object.prototype,Ds=Cs.hasOwnProperty;function Is(t){var n=this.__data__;if($t){var e=n[t];return e===js?void 0:e}return Ds.call(n,t)?n[t]:void 0}var xs=Object.prototype,Ls=xs.hasOwnProperty;function Ps(t){var n=this.__data__;return $t?n[t]!==void 0:Ls.call(n,t)}var Ns="__lodash_hash_undefined__";function Rs(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=$t&&n===void 0?Ns:n,this}function st(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}st.prototype.clear=Ms;st.prototype.delete=As;st.prototype.get=Is;st.prototype.has=Ps;st.prototype.set=Rs;function Fs(){this.__data__=[],this.size=0}function Kt(t,n){for(var e=t.length;e--;)if(zt(t[e][0],n))return e;return-1}var Us=Array.prototype,Hs=Us.splice;function Ws(t){var n=this.__data__,e=Kt(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():Hs.call(n,e,1),--this.size,!0}function Bs(t){var n=this.__data__,e=Kt(n,t);return e<0?void 0:n[e][1]}function zs(t){return Kt(this.__data__,t)>-1}function qs(t,n){var e=this.__data__,r=Kt(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}function G(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}G.prototype.clear=Fs;G.prototype.delete=Ws;G.prototype.get=Bs;G.prototype.has=zs;G.prototype.set=qs;var Ys=at(z,"Map");const _t=Ys;function ks(){this.size=0,this.__data__={hash:new st,map:new(_t||G),string:new st}}function Gs(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Jt(t,n){var e=t.__data__;return Gs(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Ks(t){var n=Jt(this,t).delete(t);return this.size-=n?1:0,n}function Js(t){return Jt(this,t).get(t)}function Vs(t){return Jt(this,t).has(t)}function Zs(t,n){var e=Jt(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}function K(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}K.prototype.clear=ks;K.prototype.delete=Ks;K.prototype.get=Js;K.prototype.has=Vs;K.prototype.set=Zs;var Qs="Expected a function";function ve(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(Qs);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],s=e.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return e.cache=s.set(i,o)||s,o};return e.cache=new(ve.Cache||K),e}ve.Cache=K;var Xs=500;function to(t){var n=ve(t,function(r){return e.size===Xs&&e.clear(),r}),e=n.cache;return n}var eo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,no=/\\(\\)?/g,ro=to(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(eo,function(e,r,i,s){n.push(i?s.replace(no,"$1"):r||e)}),n});const io=ro;function be(t){return t==null?"":An(t)}function $e(t,n){return k(t)?t:Ts(t,n)?[t]:io(be(t))}var so=1/0;function _e(t){if(typeof t=="string"||de(t))return t;var n=t+"";return n=="0"&&1/t==-so?"-0":n}function oo(t,n){n=$e(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[_e(n[e++])];return e&&e==r?t:void 0}function ao(t,n,e){var r=t==null?void 0:oo(t,n);return r===void 0?e:r}function we(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var ze=B?B.isConcatSpreadable:void 0;function co(t){return k(t)||Yt(t)||!!(ze&&t&&t[ze])}function Wn(t,n,e,r,i){var s=-1,o=t.length;for(e||(e=co),i||(i=[]);++s<o;){var a=t[s];n>0&&e(a)?n>1?Wn(a,n-1,e,r,i):we(i,a):r||(i[i.length]=a)}return i}var uo=Un(Object.getPrototypeOf,Object);const Oe=uo;var fo="[object Object]",ho=Function.prototype,lo=Object.prototype,Bn=ho.toString,po=lo.hasOwnProperty,go=Bn.call(Object);function mo(t){if(!Y(t)||X(t)!=fo)return!1;var n=Oe(t);if(n===null)return!0;var e=po.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&Bn.call(e)==go}var yo="[object DOMException]",vo="[object Error]";function zn(t){if(!Y(t))return!1;var n=X(t);return n==vo||n==yo||typeof t.message=="string"&&typeof t.name=="string"&&!mo(t)}var bo=pe(function(t,n){try{return Dn(t,void 0,n)}catch(e){return zn(e)?e:new Error(e)}});const $o=bo;function _o(t){return function(n){return t==null?void 0:t[n]}}function wo(){this.__data__=new G,this.size=0}function Oo(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function So(t){return this.__data__.get(t)}function To(t){return this.__data__.has(t)}var Eo=200;function Mo(t,n){var e=this.__data__;if(e instanceof G){var r=e.__data__;if(!_t||r.length<Eo-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new K(r)}return e.set(t,n),this.size=e.size,this}function pt(t){var n=this.__data__=new G(t);this.size=n.size}pt.prototype.clear=wo;pt.prototype.delete=Oo;pt.prototype.get=So;pt.prototype.has=To;pt.prototype.set=Mo;function Ao(t,n){return t&&Mt(n,kt(n),t)}function jo(t,n){return t&&Mt(n,Gt(n),t)}var qn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qe=qn&&typeof module=="object"&&module&&!module.nodeType&&module,Co=qe&&qe.exports===qn,Ye=Co?z.Buffer:void 0,ke=Ye?Ye.allocUnsafe:void 0;function Do(t,n){if(n)return t.slice();var e=t.length,r=ke?ke(e):new t.constructor(e);return t.copy(r),r}function Io(t,n){for(var e=-1,r=t==null?0:t.length,i=0,s=[];++e<r;){var o=t[e];n(o,e,t)&&(s[i++]=o)}return s}function Yn(){return[]}var xo=Object.prototype,Lo=xo.propertyIsEnumerable,Ge=Object.getOwnPropertySymbols,Po=Ge?function(t){return t==null?[]:(t=Object(t),Io(Ge(t),function(n){return Lo.call(t,n)}))}:Yn;const Se=Po;function No(t,n){return Mt(t,Se(t),n)}var Ro=Object.getOwnPropertySymbols,Fo=Ro?function(t){for(var n=[];t;)we(n,Se(t)),t=Oe(t);return n}:Yn;const kn=Fo;function Uo(t,n){return Mt(t,kn(t),n)}function Gn(t,n,e){var r=n(t);return k(t)?r:we(r,e(t))}function Ho(t){return Gn(t,kt,Se)}function Wo(t){return Gn(t,Gt,kn)}var Bo=at(z,"DataView");const re=Bo;var zo=at(z,"Promise");const ie=zo;var qo=at(z,"Set");const ht=qo;var Ke="[object Map]",Yo="[object Object]",Je="[object Promise]",Ve="[object Set]",Ze="[object WeakMap]",Qe="[object DataView]",ko=ot(re),Go=ot(_t),Ko=ot(ie),Jo=ot(ht),Vo=ot(ne),nt=X;(re&&nt(new re(new ArrayBuffer(1)))!=Qe||_t&&nt(new _t)!=Ke||ie&&nt(ie.resolve())!=Je||ht&&nt(new ht)!=Ve||ne&&nt(new ne)!=Ze)&&(nt=function(t){var n=X(t),e=n==Yo?t.constructor:void 0,r=e?ot(e):"";if(r)switch(r){case ko:return Qe;case Go:return Ke;case Ko:return Je;case Jo:return Ve;case Vo:return Ze}return n});const Vt=nt;var Zo=Object.prototype,Qo=Zo.hasOwnProperty;function Xo(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&Qo.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var ta=z.Uint8Array;const Xe=ta;function Te(t){var n=new t.constructor(t.byteLength);return new Xe(n).set(new Xe(t)),n}function ea(t,n){var e=n?Te(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var na=/\w*$/;function ra(t){var n=new t.constructor(t.source,na.exec(t));return n.lastIndex=t.lastIndex,n}var tn=B?B.prototype:void 0,en=tn?tn.valueOf:void 0;function ia(t){return en?Object(en.call(t)):{}}function sa(t,n){var e=n?Te(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var oa="[object Boolean]",aa="[object Date]",ca="[object Map]",ua="[object Number]",fa="[object RegExp]",ha="[object Set]",da="[object String]",la="[object Symbol]",pa="[object ArrayBuffer]",ga="[object DataView]",ma="[object Float32Array]",ya="[object Float64Array]",va="[object Int8Array]",ba="[object Int16Array]",$a="[object Int32Array]",_a="[object Uint8Array]",wa="[object Uint8ClampedArray]",Oa="[object Uint16Array]",Sa="[object Uint32Array]";function Ta(t,n,e){var r=t.constructor;switch(n){case pa:return Te(t);case oa:case aa:return new r(+t);case ga:return ea(t,e);case ma:case ya:case va:case ba:case $a:case _a:case wa:case Oa:case Sa:return sa(t,e);case ca:return new r;case ua:case da:return new r(t);case fa:return ra(t);case ha:return new r;case la:return ia(t)}}function Ea(t){return typeof t.constructor=="function"&&!qt(t)?ni(Oe(t)):{}}var Ma="[object Map]";function Aa(t){return Y(t)&&Vt(t)==Ma}var nn=lt&&lt.isMap,ja=nn?ye(nn):Aa;const Ca=ja;var Da="[object Set]";function Ia(t){return Y(t)&&Vt(t)==Da}var rn=lt&&lt.isSet,xa=rn?ye(rn):Ia;const La=xa;var Pa=1,Na=2,Ra=4,Kn="[object Arguments]",Fa="[object Array]",Ua="[object Boolean]",Ha="[object Date]",Wa="[object Error]",Jn="[object Function]",Ba="[object GeneratorFunction]",za="[object Map]",qa="[object Number]",Vn="[object Object]",Ya="[object RegExp]",ka="[object Set]",Ga="[object String]",Ka="[object Symbol]",Ja="[object WeakMap]",Va="[object ArrayBuffer]",Za="[object DataView]",Qa="[object Float32Array]",Xa="[object Float64Array]",tc="[object Int8Array]",ec="[object Int16Array]",nc="[object Int32Array]",rc="[object Uint8Array]",ic="[object Uint8ClampedArray]",sc="[object Uint16Array]",oc="[object Uint32Array]",E={};E[Kn]=E[Fa]=E[Va]=E[Za]=E[Ua]=E[Ha]=E[Qa]=E[Xa]=E[tc]=E[ec]=E[nc]=E[za]=E[qa]=E[Vn]=E[Ya]=E[ka]=E[Ga]=E[Ka]=E[rc]=E[ic]=E[sc]=E[oc]=!0;E[Wa]=E[Jn]=E[Ja]=!1;function Lt(t,n,e,r,i,s){var o,a=n&Pa,c=n&Na,u=n&Ra;if(e&&(o=i?e(t,r,i,s):e(t)),o!==void 0)return o;if(!Q(t))return t;var h=k(t);if(h){if(o=Xo(t),!a)return ii(t,o)}else{var f=Vt(t),_=f==Jn||f==Ba;if(me(t))return Do(t,a);if(f==Vn||f==Kn||_&&!i){if(o=c||_?{}:Ea(t),!a)return c?Uo(t,jo(o,t)):No(t,Ao(o,t))}else{if(!E[f])return i?t:{};o=Ta(t,f,a)}}s||(s=new pt);var j=s.get(t);if(j)return j;s.set(t,o),La(t)?t.forEach(function(S){o.add(Lt(S,n,e,S,t,s))}):Ca(t)&&t.forEach(function(S,x){o.set(x,Lt(S,n,e,x,t,s))});var M=u?c?Wo:Ho:c?Gt:kt,g=h?void 0:M(t);return gi(g||t,function(S,x){g&&(x=S,S=t[x]),le(o,x,Lt(S,n,e,x,t,s))}),o}var ac=1,cc=4;function Ee(t){return Lt(t,ac|cc)}var uc="__lodash_hash_undefined__";function fc(t){return this.__data__.set(t,uc),this}function hc(t){return this.__data__.has(t)}function Rt(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new K;++n<e;)this.add(t[n])}Rt.prototype.add=Rt.prototype.push=fc;Rt.prototype.has=hc;function dc(t,n){return t.has(n)}function Zn(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e}function lc(t,n,e){n=$e(n,t);for(var r=-1,i=n.length,s=!1;++r<i;){var o=_e(n[r]);if(!(s=t!=null&&e(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&ge(i)&&Bt(o,i)&&(k(t)||Yt(t)))}function pc(t){return Y(t)&&At(t)}function gc(t,n,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(n,t[r]))return!0;return!1}var mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yc=_o(mc);const vc=yc;var Qn=/[&<>"']/g,bc=RegExp(Qn.source);function $c(t){return t=be(t),t&&bc.test(t)?t.replace(Qn,vc):t}var _c=Object.prototype,wc=_c.hasOwnProperty;function Oc(t,n){return t!=null&&wc.call(t,n)}function Sc(t,n){return t!=null&&lc(t,n,Oc)}function Tc(t,n){return Mn(n,function(e){return t[e]})}var Ec="[object Map]",Mc="[object Set]",Ac=Object.prototype,jc=Ac.hasOwnProperty;function Xn(t){if(t==null)return!0;if(At(t)&&(k(t)||typeof t=="string"||typeof t.splice=="function"||me(t)||Rn(t)||Yt(t)))return!t.length;var n=Vt(t);if(n==Ec||n==Mc)return!t.size;if(qt(t))return!Hn(t).length;for(var e in t)if(jc.call(t,e))return!1;return!0}function Cc(t,n,e,r){if(!Q(t))return t;n=$e(n,t);for(var i=-1,s=n.length,o=s-1,a=t;a!=null&&++i<s;){var c=_e(n[i]),u=e;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=o){var h=a[c];u=r?r(h,c,a):void 0,u===void 0&&(u=Q(h)?h:Bt(n[i+1])?[]:{})}le(a,c,u),a=a[c]}return t}function Dc(t,n,e){return t==null?t:Cc(t,n,e)}var tr=Object.prototype,Ic=tr.hasOwnProperty;function sn(t,n,e,r){return t===void 0||zt(t,tr[e])&&!Ic.call(r,e)?n:t}var xc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Lc(t){return"\\"+xc[t]}var Pc=/<%=([\s\S]+?)%>/g;const er=Pc;var Nc=/<%-([\s\S]+?)%>/g;const Rc=Nc;var Fc=/<%([\s\S]+?)%>/g;const Uc=Fc;var Hc={escape:Rc,evaluate:Uc,interpolate:er,variable:"",imports:{_:{escape:$c}}};const on=Hc;var Wc="Invalid `variable` option passed into `_.template`",Bc=/\b__p \+= '';/g,zc=/\b(__p \+=) '' \+/g,qc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yc=/[()=,{}\[\]\/\s]/,kc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/($^)/,Gc=/['\n\r\u2028\u2029\\]/g,Kc=Object.prototype,an=Kc.hasOwnProperty;function cn(t,n,e){var r=on.imports._.templateSettings||on;e&&xn(t,n,e)&&(n=void 0),t=be(t),n=Be({},n,r,sn);var i=Be({},n.imports,r.imports,sn),s=kt(i),o=Tc(i,s),a,c,u=0,h=n.interpolate||Dt,f="__p += '",_=RegExp((n.escape||Dt).source+"|"+h.source+"|"+(h===er?kc:Dt).source+"|"+(n.evaluate||Dt).source+"|$","g"),j=an.call(n,"sourceURL")?"//# sourceURL="+(n.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(_,function(S,x,F,P,tt,U){return F||(F=P),f+=t.slice(u,U).replace(Gc,Lc),x&&(a=!0,f+="' +\n__e("+x+") +\n'"),tt&&(c=!0,f+="';\n"+tt+";\n__p += '"),F&&(f+="' +\n((__t = ("+F+")) == null ? '' : __t) +\n'"),u=U+S.length,S}),f+="';\n";var M=an.call(n,"variable")&&n.variable;if(!M)f="with (obj) {\n"+f+"\n}\n";else if(Yc.test(M))throw new Error(Wc);f=(c?f.replace(Bc,""):f).replace(zc,"$1").replace(qc,"$1;"),f="function("+(M||"obj")+") {\n"+(M?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=$o(function(){return Function(s,j+"return "+f).apply(void 0,o)});if(g.source=f,zn(g))throw g;return g}var Jc=1/0,Vc=ht&&1/Zn(new ht([,-0]))[1]==Jc?function(t){return new ht(t)}:ri;const Zc=Vc;var Qc=200;function Xc(t,n,e){var r=-1,i=$i,s=t.length,o=!0,a=[],c=a;if(e)o=!1,i=gc;else if(s>=Qc){var u=n?null:Zc(t);if(u)return Zn(u);o=!1,i=dc,c=new Rt}else c=n?[]:a;t:for(;++r<s;){var h=t[r],f=n?n(h):h;if(h=e||h!==0?h:0,o&&f===f){for(var _=c.length;_--;)if(c[_]===f)continue t;n&&c.push(f),a.push(h)}else i(c,f,e)||(c!==a&&c.push(f),a.push(h))}return a}var tu=pe(function(t){return Xc(Wn(t,1,pc,!0))});const eu=tu;var nr={exports:{}};(function(t,n){(function(e,r){t.exports=r()})(gn,function(){var e=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",c="hour",u="day",h="week",f="month",_="quarter",j="year",M="date",g="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,F={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},P=function($,p,d){var y=String($);return!y||y.length>=p?$:""+Array(p+1-y.length).join(d)+$},tt={s:P,z:function($){var p=-$.utcOffset(),d=Math.abs(p),y=Math.floor(d/60),l=d%60;return(p<=0?"+":"-")+P(y,2,"0")+":"+P(l,2,"0")},m:function $(p,d){if(p.date()<d.date())return-$(d,p);var y=12*(d.year()-p.year())+(d.month()-p.month()),l=p.clone().add(y,f),b=d-l<0,v=p.clone().add(y+(b?-1:1),f);return+(-(y+(d-l)/(b?l-v:v-l))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:j,w:h,d:u,D:M,h:c,m:a,s:o,ms:s,Q:_}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},U="en",H={};H[U]=F;var et=function($){return $ instanceof jt},ct=function $(p,d,y){var l;if(!p)return U;if(typeof p=="string"){var b=p.toLowerCase();H[b]&&(l=b),d&&(H[b]=d,l=b);var v=p.split("-");if(!l&&v.length>1)return $(v[0])}else{var w=p.name;H[w]=p,l=w}return!y&&l&&(U=l),l||!y&&U},C=function($,p){if(et($))return $.clone();var d=typeof p=="object"?p:{};return d.date=$,d.args=arguments,new jt(d)},T=tt;T.l=ct,T.i=et,T.w=function($,p){return C($,{locale:p.$L,utc:p.$u,x:p.$x,$offset:p.$offset})};var jt=function(){function $(d){this.$L=ct(d.locale,null,!0),this.parse(d)}var p=$.prototype;return p.parse=function(d){this.$d=function(y){var l=y.date,b=y.utc;if(l===null)return new Date(NaN);if(T.u(l))return new Date;if(l instanceof Date)return new Date(l);if(typeof l=="string"&&!/Z$/i.test(l)){var v=l.match(S);if(v){var w=v[2]-1||0,I=(v[7]||"0").substring(0,3);return b?new Date(Date.UTC(v[1],w,v[3]||1,v[4]||0,v[5]||0,v[6]||0,I)):new Date(v[1],w,v[3]||1,v[4]||0,v[5]||0,v[6]||0,I)}}return new Date(l)}(d),this.$x=d.x||{},this.init()},p.init=function(){var d=this.$d;this.$y=d.getFullYear(),this.$M=d.getMonth(),this.$D=d.getDate(),this.$W=d.getDay(),this.$H=d.getHours(),this.$m=d.getMinutes(),this.$s=d.getSeconds(),this.$ms=d.getMilliseconds()},p.$utils=function(){return T},p.isValid=function(){return this.$d.toString()!==g},p.isSame=function(d,y){var l=C(d);return this.startOf(y)<=l&&l<=this.endOf(y)},p.isAfter=function(d,y){return C(d)<this.startOf(y)},p.isBefore=function(d,y){return this.endOf(y)<C(d)},p.$g=function(d,y,l){return T.u(d)?this[y]:this.set(l,d)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(d,y){var l=this,b=!!T.u(y)||y,v=T.p(d),w=function(ut,N){var V=T.w(l.$u?Date.UTC(l.$y,N,ut):new Date(l.$y,N,ut),l);return b?V:V.endOf(u)},I=function(ut,N){return T.w(l.toDate()[ut].apply(l.toDate("s"),(b?[0,0,0,0]:[23,59,59,999]).slice(N)),l)},D=this.$W,L=this.$M,J=this.$D,q="set"+(this.$u?"UTC":"");switch(v){case j:return b?w(1,0):w(31,11);case f:return b?w(1,L):w(0,L+1);case h:var gt=this.$locale().weekStart||0,mt=(D<gt?D+7:D)-gt;return w(b?J-mt:J+(6-mt),L);case u:case M:return I(q+"Hours",0);case c:return I(q+"Minutes",1);case a:return I(q+"Seconds",2);case o:return I(q+"Milliseconds",3);default:return this.clone()}},p.endOf=function(d){return this.startOf(d,!1)},p.$set=function(d,y){var l,b=T.p(d),v="set"+(this.$u?"UTC":""),w=(l={},l[u]=v+"Date",l[M]=v+"Date",l[f]=v+"Month",l[j]=v+"FullYear",l[c]=v+"Hours",l[a]=v+"Minutes",l[o]=v+"Seconds",l[s]=v+"Milliseconds",l)[b],I=b===u?this.$D+(y-this.$W):y;if(b===f||b===j){var D=this.clone().set(M,1);D.$d[w](I),D.init(),this.$d=D.set(M,Math.min(this.$D,D.daysInMonth())).$d}else w&&this.$d[w](I);return this.init(),this},p.set=function(d,y){return this.clone().$set(d,y)},p.get=function(d){return this[T.p(d)]()},p.add=function(d,y){var l,b=this;d=Number(d);var v=T.p(y),w=function(L){var J=C(b);return T.w(J.date(J.date()+Math.round(L*d)),b)};if(v===f)return this.set(f,this.$M+d);if(v===j)return this.set(j,this.$y+d);if(v===u)return w(1);if(v===h)return w(7);var I=(l={},l[a]=r,l[c]=i,l[o]=e,l)[v]||1,D=this.$d.getTime()+d*I;return T.w(D,this)},p.subtract=function(d,y){return this.add(-1*d,y)},p.format=function(d){var y=this,l=this.$locale();if(!this.isValid())return l.invalidDate||g;var b=d||"YYYY-MM-DDTHH:mm:ssZ",v=T.z(this),w=this.$H,I=this.$m,D=this.$M,L=l.weekdays,J=l.months,q=function(N,V,Zt,Ct){return N&&(N[V]||N(y,b))||Zt[V].slice(0,Ct)},gt=function(N){return T.s(w%12||12,N,"0")},mt=l.meridiem||function(N,V,Zt){var Ct=N<12?"AM":"PM";return Zt?Ct.toLowerCase():Ct},ut={YY:String(this.$y).slice(-2),YYYY:this.$y,M:D+1,MM:T.s(D+1,2,"0"),MMM:q(l.monthsShort,D,J,3),MMMM:q(J,D),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:q(l.weekdaysMin,this.$W,L,2),ddd:q(l.weekdaysShort,this.$W,L,3),dddd:L[this.$W],H:String(w),HH:T.s(w,2,"0"),h:gt(1),hh:gt(2),a:mt(w,I,!0),A:mt(w,I,!1),m:String(I),mm:T.s(I,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:v};return b.replace(x,function(N,V){return V||ut[N]||v.replace(":","")})},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(d,y,l){var b,v=T.p(y),w=C(d),I=(w.utcOffset()-this.utcOffset())*r,D=this-w,L=T.m(this,w);return L=(b={},b[j]=L/12,b[f]=L,b[_]=L/3,b[h]=(D-I)/6048e5,b[u]=(D-I)/864e5,b[c]=D/i,b[a]=D/r,b[o]=D/e,b)[v]||D,l?L:T.a(L)},p.daysInMonth=function(){return this.endOf(f).$D},p.$locale=function(){return H[this.$L]},p.locale=function(d,y){if(!d)return this.$L;var l=this.clone(),b=ct(d,y,!0);return b&&(l.$L=b),l},p.clone=function(){return T.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},$}(),Me=jt.prototype;return C.prototype=Me,[["$ms",s],["$s",o],["$m",a],["$H",c],["$W",u],["$M",f],["$y",j],["$D",M]].forEach(function($){Me[$[1]]=function(p){return this.$g(p,$[0],$[1])}}),C.extend=function($,p){return $.$i||($(p,jt,C),$.$i=!0),C},C.locale=ct,C.isDayjs=et,C.unix=function($){return C(1e3*$)},C.en=H[U],C.Ls=H,C.p={},C})})(nr);var nu=nr.exports;const ru=ue(nu);var rr={exports:{}};(function(t,n){(function(e,r){t.exports=r()})(gn,function(){var e="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var c=o.prototype;a.utc=function(g){var S={date:g,utc:!0,args:arguments};return new o(S)},c.utc=function(g){var S=a(this.toDate(),{locale:this.$L,utc:!0});return g?S.add(this.utcOffset(),e):S},c.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),u.call(this,g)};var h=c.init;c.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else h.call(this)};var f=c.utcOffset;c.utcOffset=function(g,S){var x=this.$utils().u;if(x(g))return this.$u?0:x(this.$offset)?f.call(this):this.$offset;if(typeof g=="string"&&(g=function(U){U===void 0&&(U="");var H=U.match(r);if(!H)return null;var et=(""+H[0]).match(i)||["-",0,0],ct=et[0],C=60*+et[1]+ +et[2];return C===0?0:ct==="+"?C:-C}(g),g===null))return this;var F=Math.abs(g)<=16?60*g:g,P=this;if(S)return P.$offset=F,P.$u=g===0,P;if(g!==0){var tt=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(P=this.local().add(F+tt,e)).$offset=F,P.$x.$localOffset=tt}else P=this.utc();return P};var _=c.format;c.format=function(g){var S=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return _.call(this,S)},c.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var j=c.toDate;c.toDate=function(g){return g==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():j.call(this)};var M=c.diff;c.diff=function(g,S,x){if(g&&this.$u===g.$u)return M.call(this,g,S,x);var F=this.local(),P=a(g).local();return M.call(F,P,S,x)}}})})(rr);var iu=rr.exports;const su=ue(iu);var Pt=(t=>(t.COMP="comp",t.CODE="code",t.DATA_SOURCE="data-source",t))(Pt||{}),ir=(t=>(t.CODE="code",t))(ir||{});ru.extend(su);const Au=(t="")=>t.replace(/\B([A-Z])/g,"-$1").toLowerCase(),bt=(t,n=[])=>{const e=[],r=function(i,s){if(!Array.isArray(s))return null;for(let o=0,a=s.length;o<a;o++){const c=s[o];if(e.push(c),"".concat(c.id)==="".concat(i))return c;if(c.items){const u=r(i,c.items);if(u)return u}e.pop()}return null};return r(t,n),e},sr=t=>Object.prototype.toString.call(t)==="[object Object]",se=(t,n={})=>ao(n,t),oe=(t,n,e={})=>Dc(e,t,n),ee=(t,n=[])=>{const e=[],r=function(i,s){if(Array.isArray(s))for(let o=0,a=s.length;o<a;o++){const c=s[o],u=i.findIndex(h=>"".concat(h)==="".concat(c.id));u>-1&&(i.slice(u,1),e.push(c)),c.items&&r(i,c.items)}};return r(t,n),e},ou=(t={},n)=>Array.from(Object.values(t).reduce((e,r)=>{var i;return(((i=r[n])==null?void 0:i.keys)||[]).forEach(s=>e.add(s)),e},new Set)),un=(t={})=>Array.from(Object.values(t).reduce((n,e)=>(Object.keys(e).forEach(r=>{n.add(r)}),n),new Set)),ae=(t,n,e)=>{var a;const r=bt(t.id,n),i=r.pop();let s=r.pop();if(e&&(s=bt(e,n).pop()),!i)throw new Error("未找到目标节点");if(!s)throw new Error("未找到父节点");const o=(a=s.items)==null?void 0:a.findIndex(c=>c.id===i.id);s.items.splice(o,1,t)},or=(t,n,e={},r)=>{let i=[];if(!r)i=ou(e,n.id);else{const o=e[r];i=(o==null?void 0:o[n.id].keys)||[]}const s="__magic__";return i.forEach(o=>{const a="".concat(s).concat(o),c=se(o,n);let u=se(a,n);typeof u>"u"&&(oe(a,c,n),u=c);let h;try{h=t(u)}catch(f){console.error(f),h=""}oe(o,h,n)}),Array.isArray(n.items)&&n.items.forEach(o=>or(t,o,e)),n},au=(t,n,e,r=[])=>{var i,s;switch(t){case"is":return n===e;case"not":return n!==e;case"=":return n===e;case"!=":return n!==e;case">":return n>e;case">=":return n>=e;case"<":return n<e;case"<=":return n<=e;case"between":return r.length>1&&n>=r[0]&&n<=r[1];case"not_between":return r.length<2||n<r[0]||n>r[1];case"include":return(i=n==null?void 0:n.includes)==null?void 0:i.call(n,e);case"not_include":return typeof n>"u"||!((s=n.includes)!=null&&s.call(n,e))}return!1},ar=t=>{const n={},e={string:void 0,object:{},array:[],boolean:void 0,number:void 0,null:null,any:void 0};return t.forEach(r=>{if(typeof r.defaultValue<"u"){if(r.type==="array"&&!Array.isArray(r.defaultValue)){n[r.name]=e.array;return}if(r.type==="object"&&!sr(r.defaultValue)){if(typeof r.defaultValue=="string"){try{n[r.name]=JSON.parse(r.defaultValue)}catch(i){n[r.name]=e.object}return}n[r.name]=e.object;return}n[r.name]=Ee(r.defaultValue);return}if(r.type==="object"){n[r.name]=r.fields?ar(r.fields):e.object;return}if(r.type){n[r.name]=e[r.type];return}n[r.name]=void 0}),n},fn="ds-field::";var Ut,wt,Ot,it,St;class cr extends Sn{constructor(e){var r,i,s,o;super();m(this,"isInit",!1);m(this,"data",{});m(this,"app");m(this,"mockData");W(this,Ut,"base");W(this,wt,void 0);W(this,Ot,void 0);W(this,it,[]);W(this,St,[]);Z(this,wt,e.schema.id),Z(this,Ot,e.schema),this.app=e.app,this.setFields(e.schema.fields),this.setMethods(e.schema.methods||[]),this.app.platform==="editor"?(this.mockData=((i=(r=e.schema.mocks)==null?void 0:r.find(a=>a.useInEditor))==null?void 0:i.data)||this.getDefaultData(),this.setData(this.mockData)):typeof e.useMock=="boolean"&&e.useMock?(this.mockData=((o=(s=e.schema.mocks)==null?void 0:s.find(a=>a.enable))==null?void 0:o.data)||this.getDefaultData(),this.setData(this.mockData)):e.initialData?(this.setData(e.initialData),this.isInit=!0):this.setData(this.getDefaultData())}get id(){return R(this,wt)}get type(){return R(this,Ut)}get schema(){return R(this,Ot)}get fields(){return R(this,it)}get methods(){return R(this,St)}setFields(e){Z(this,it,e)}setMethods(e){Z(this,St,e)}setData(e,r){r?oe(r,e,this.data):this.data=e;const i={updateData:e,path:r};this.emit("change",i)}getDefaultData(){return ar(R(this,it))}async init(){this.isInit=!0}destroy(){this.data={},Z(this,it,[]),this.removeAllListeners()}}Ut=new WeakMap,wt=new WeakMap,Ot=new WeakMap,it=new WeakMap,St=new WeakMap;const hn=t=>Object.entries(t).reduce((n,[e,r])=>{let i=r;return typeof r=="object"&&(i=JSON.stringify(r)),typeof r<"u"?"".concat(n).concat(n?"&":"").concat(globalThis.encodeURIComponent(e),"=").concat(globalThis.encodeURIComponent("".concat(i))):n},""),cu=async t=>{var h;const{url:n,method:e="GET",headers:r={},params:i={},data:s={},...o}=t,a=hn(i);let c=JSON.stringify(s);return(h=r["Content-Type"])!=null&&h.includes("application/x-www-form-urlencoded")&&(c=hn(s)),(await globalThis.fetch(a?"".concat(n,"?").concat(a):n,{method:e,headers:r,body:e==="GET"?void 0:c,...o})).json()};var dt,Tt,Et,Ht;class uu extends cr{constructor(e){const{options:r}=e.schema;super(e);m(this,"isLoading",!1);m(this,"error");m(this,"httpOptions");W(this,dt,void 0);W(this,Tt,[]);W(this,Et,[]);W(this,Ht,"http");this.httpOptions=r,typeof e.request=="function"?Z(this,dt,e.request):typeof globalThis.fetch=="function"&&Z(this,dt,cu),this.methods.forEach(i=>{typeof i.content=="function"&&(i.timing==="beforeRequest"&&R(this,Tt).push(i.content),i.timing==="afterRequest"&&R(this,Et).push(i.content))})}get type(){return R(this,Ht)}async init(){this.schema.autoFetch&&await this.request(this.httpOptions),super.init()}async request(e={}){var i,s;this.isLoading=!0;let r={...this.httpOptions,...e};try{for(const a of R(this,Tt))await a({options:r,params:{},dataSource:this,app:this.app});typeof this.schema.beforeRequest=="function"&&(r=this.schema.beforeRequest(r,{app:this.app,dataSource:this}));let o=this.mockData?this.mockData:await((i=R(this,dt))==null?void 0:i.call(this,r));for(const a of R(this,Et))await a({res:o,options:r,params:{},dataSource:this,app:this.app});if(typeof this.schema.afterResponse=="function"&&(o=this.schema.afterResponse(o,{app:this.app,dataSource:this,options:r})),(s=this.schema.responseOptions)!=null&&s.dataPath){const a=se(this.schema.responseOptions.dataPath,o);this.setData(a)}else this.setData(o);this.error=void 0}catch(o){this.error={msg:o.message},this.emit("error",o)}this.isLoading=!1}get(e){return this.request({...e,method:"GET"})}post(e){return this.request({...e,method:"POST"})}}dt=new WeakMap,Tt=new WeakMap,Et=new WeakMap,Ht=new WeakMap;const rt=class rt extends Sn{constructor({app:e,useMock:r,initialData:i}){var s,o;super();m(this,"app");m(this,"dataSourceMap",new Map);m(this,"data",{});m(this,"useMock",!1);this.app=e,this.useMock=r,i&&(this.data=i),(o=(s=e.dsl)==null?void 0:s.dataSources)==null||o.forEach(a=>{this.addDataSource(a)}),Promise.all(Array.from(this.dataSourceMap).map(async([,a])=>this.init(a)))}static register(e,r){rt.dataSourceClassMap.set(e,r)}static registe(e,r){rt.register(e,r)}static getDataSourceClass(e){return rt.dataSourceClassMap.get(e)}async init(e){var s;if(e.isInit||this.app.jsEngine&&((s=e.schema.disabledInitInJsEngine)!=null&&s.includes(this.app.jsEngine)))return;const r=[],i=[];e.methods.forEach(o=>{typeof o.content=="function"&&(o.timing==="beforeInit"&&r.push(o.content),o.timing==="afterInit"&&i.push(o.content))});for(const o of r)await o({params:{},dataSource:e,app:this.app});await e.init();for(const o of i)await o({params:{},dataSource:e,app:this.app})}get(e){return this.dataSourceMap.get(e)}async addDataSource(e){if(!e)return;const r=rt.dataSourceClassMap.get(e.type)||cr,i=new r({app:this.app,schema:e,request:this.app.request,useMock:this.useMock,initialData:this.data[e.id]});this.dataSourceMap.set(e.id,i),this.data[i.id]=i.data,i.on("change",s=>{this.setData(i,s)})}setData(e,r){this.data[e.id]=e.data,this.emit("change",e.id,r)}removeDataSource(e){var r;(r=this.get(e))==null||r.destroy(),delete this.data[e],this.dataSourceMap.delete(e)}updateSchema(e){e.forEach(r=>{if(!this.get(r.id))return;this.removeDataSource(r.id),this.addDataSource(r);const s=this.get(r.id);s&&this.init(s)})}compiledNode(e,r){var i;return e.condResult===!1||e.visible===!1?e:or(s=>{if(typeof s=="string")return cn(s)(this.data);if(s!=null&&s.isBindDataSource&&s.dataSourceId)return this.data[s.dataSourceId];if(s!=null&&s.isBindDataSourceField&&s.dataSourceId&&typeof s.template=="string")return cn(s.template)(this.data[s.dataSourceId]);if(Array.isArray(s)&&typeof s[0]=="string"){const[o,...a]=s,c=o.indexOf(fn);if(c>-1){const u=o.substring(c+fn.length),h=this.data[u];return h?a.reduce((f,_)=>Array.isArray(f)?f:sr(f)?f[_]:"",h):s}}return s},Ee(e),((i=this.app.dsl)==null?void 0:i.dataSourceDeps)||{},r)}compliedConds(e){if(!e.displayConds||!Array.isArray(e.displayConds)||!e.displayConds.length)return!0;for(const{cond:r}of e.displayConds){if(!r)continue;let i=!0;for(const{op:s,value:o,range:a,field:c}of r){const[u,h]=c,f=this.data[u];if(!f||!h)break;const _=f[h];if(!au(s,_,o,a)){i=!1;break}}if(i)return!0}return!1}destroy(){this.removeAllListeners(),this.data={},this.dataSourceMap.forEach(e=>{e.destroy()}),this.dataSourceMap.clear()}};m(rt,"dataSourceClassMap",new Map);let Ft=rt;Ft.register("http",uu);const ur=Ft,fu=(t,n,e)=>{const{dsl:r,platform:i}=t;if(!(r!=null&&r.dataSources))return;const s=new ur({app:t,useMock:n,initialData:e});return r.dataSources&&r.dataSourceCondDeps&&i!=="editor"&&ee(un(r.dataSourceCondDeps),r.items).forEach(o=>{o.condResult=s.compliedConds(o),ae(o,r.items)}),r.dataSources&&r.dataSourceDeps&&ee(un(r.dataSourceDeps),r.items).forEach(o=>{ae(s.compiledNode(o),r.items)}),t.jsEngine!=="nodejs"&&s.on("change",(o,a)=>{var f,_;const c=((f=r.dataSourceDeps)==null?void 0:f[o])||{},u=((_=r.dataSourceCondDeps)==null?void 0:_[o])||{},h=eu([...Object.keys(u),...Object.keys(c)]);s.emit("update-data",ee(h,r.items).map(j=>{const M=Ee(j);return M.condResult=s.compliedConds(M),s.compiledNode(M)}),o,a)}),s};class hu{constructor(n=globalThis.navigator.userAgent,e={}){m(this,"isIos",!1);m(this,"isIphone",!1);m(this,"isIpad",!1);m(this,"isAndroid",!1);m(this,"isAndroidPad",!1);m(this,"isMac",!1);m(this,"isWin",!1);m(this,"isMqq",!1);m(this,"isWechat",!1);m(this,"isWeb",!1);this.isIphone=n.indexOf("iPhone")>=0,this.isIpad=/(iPad).*OS\s([\d_]+)/.test(n),this.isIos=this.isIphone||this.isIpad,this.isAndroid=n.indexOf("Android")>=0,this.isAndroidPad=this.isAndroid&&n.indexOf("Mobile")<0,this.isMac=n.indexOf("Macintosh")>=0,this.isWin=n.indexOf("Windows")>=0,this.isMqq=/QQ\/([\d.]+)/.test(n),this.isWechat=n.indexOf("MicroMessenger")>=0&&n.indexOf("wxwork")<0,this.isWeb=!this.isIos&&!this.isAndroid&&!/(WebOS|BlackBerry)/.test(n),Object.entries(e).forEach(([r,i])=>{this[r]=i})}}const dn=hu,ln="magic:common:events:",fr="magic:common:actions:",It={SHOW:"show",HIDE:"hide",SCROLL_TO_VIEW:"scrollIntoView",SCROLL_TO_TOP:"scrollToTop"},du=t=>t.startsWith(ln)?t:"".concat(ln).concat(t),lu=t=>t.startsWith(fr),hr=(t,n)=>{var r;if(!t)return!1;if(!t.id)return hr(t.parentElement,n);const e=(r=n.page)==null?void 0:r.getNode(t.id);return e||!1},pn=(t,n,e)=>{const r=hr(e.target,t);r&&t.emit(du(n),r)},pu=t=>{t.jsEngine==="browser"&&(window.document.body.addEventListener("click",n=>{pn(t,"click",n)}),window.document.body.addEventListener("click",n=>{pn(t,"click:capture",n)},!0))},gu=(t,n)=>{var r;const{instance:e}=n;if(e)switch(t.replace(fr,"")){case It.SHOW:e.show();break;case It.HIDE:e.hide();break;case It.SCROLL_TO_VIEW:(r=e.$el)==null||r.scrollIntoView({behavior:"smooth"});break;case It.SCROLL_TO_TOP:window.scrollTo({top:0,behavior:"smooth"});break}};class mu{constructor(){m(this,"data",{})}set(n,e){this.data[n]=e}get(n){return this.data[n]}}class yu extends he.EventEmitter{constructor(e){super();m(this,"data");m(this,"style");m(this,"events");m(this,"instance");m(this,"page");m(this,"parent");m(this,"app");m(this,"store",new mu);this.page=e.page,this.parent=e.parent,this.app=e.app;const{events:r}=e.config;this.data=e.config,this.events=r||[],this.listenLifeSafe()}setData(e){this.data=e,this.emit("update-data")}destroy(){this.removeAllListeners()}listenLifeSafe(){this.once("created",async e=>{this.once("destroy",()=>{this.instance=null,typeof this.data.destroy=="function"&&this.data.destroy(this),this.listenLifeSafe()}),this.instance=e,await this.runCodeBlock("created")}),this.once("mounted",async e=>{this.instance=e;const r=this.app.eventQueueMap[e.config.id]||[];for(let i=r.shift();i;i=r.shift())this.app.compActionHandler(i.eventConfig,i.fromCpt,i.args);await this.runCodeBlock("mounted")})}async runCodeBlock(e){var r,i,s;if(typeof this.data[e]=="function"){await this.data[e](this);return}if(!(((r=this.data[e])==null?void 0:r.hookType)!==ir.CODE||Xn(this.app.codeDsl)))for(const o of this.data[e].hookData){const{codeId:a,params:c={}}=o,u=(s=(i=this.app.codeDsl)==null?void 0:i[a])==null?void 0:s.content;typeof u=="function"&&await u({app:this.app,params:c})}}}const ce=yu;class vu extends ce{constructor(e){super(e);m(this,"nodes",new Map);this.setNode(e.config.id,this),this.initNode(e.config,this)}initNode(e,r){var s,o,a;const i=new ce({config:e,parent:r,page:this,app:this.app});if(this.setNode(e.id,i),e.type==="page-fragment-container"&&e.pageFragmentId){const c=(o=(s=this.app.dsl)==null?void 0:s.items)==null?void 0:o.find(u=>u.id===e.pageFragmentId);c&&(e.items=[c])}(a=e.items)==null||a.forEach(c=>{this.initNode(c,i)})}getNode(e){return this.nodes.get(e)}setNode(e,r){this.nodes.set(e,r)}deleteNode(e){this.nodes.delete(e)}destroy(){super.destroy(),this.nodes.clear()}}const bu=vu,$u=t=>{if(typeof t!="string")return t;const n={};return t.split(";").forEach(e=>{if(!e)return;const r=e.split(":");let i=r.shift(),s=r.join(":");i&&(i=i.replace(/^\s*/,"").replace(/\s*$/,""),s=s.replace(/^\s*/,"").replace(/\s*$/,""),i=i.split("-").map((o,a)=>a>0?"".concat(o[0].toUpperCase()).concat(o.substr(1)):o).join(""),n[i]=s)}),n},_u=t=>t&&!/^url/.test(t)&&!/^linear-gradient/.test(t)?"url(".concat(t,")"):t,wu=t=>/^(-?\d+)(\.\d+)?$/.test(t);class Ou extends he.EventEmitter{constructor(e){var r;super();m(this,"env",new dn);m(this,"dsl");m(this,"codeDsl");m(this,"dataSourceManager");m(this,"page");m(this,"useMock",!1);m(this,"platform","mobile");m(this,"jsEngine","browser");m(this,"designWidth",375);m(this,"request");m(this,"components",new Map);m(this,"eventQueueMap",{});m(this,"eventList",new Map);this.setEnv(e.ua),this.codeDsl=(r=e.config)==null?void 0:r.codeBlocks,e.platform&&(this.platform=e.platform),e.jsEngine&&(this.jsEngine=e.jsEngine),typeof e.useMock=="boolean"&&(this.useMock=e.useMock),typeof e.designWidth<"u"&&this.setDesignWidth(e.designWidth),e.transformStyle&&(this.transformStyle=e.transformStyle),e.request&&(this.request=e.request),e.config&&this.setConfig(e.config,e.curPage),pu(this)}setEnv(e){this.env=new dn(e)}setDesignWidth(e){this.designWidth=e,this.jsEngine==="browser"&&(this.calcFontsize(),globalThis.removeEventListener("resize",this.calcFontsize),globalThis.addEventListener("resize",this.calcFontsize))}transformStyle(e){if(!e)return{};let r={};const i={};typeof e=="string"?r=$u(e):r={...e};const s=this.jsEngine==="hippy",o=["zIndex","opacity","fontWeight"];return Object.entries(r).forEach(([a,c])=>{a==="scale"&&!i.transform&&s?i.transform=[{scale:c}]:a==="backgroundImage"&&!s?c&&(i[a]=_u(c)):a==="transform"&&typeof c!="string"?i[a]=this.getTransform(c):!o.includes(a)&&c&&/^[-]?[0-9]*[.]?[0-9]*$/.test(c)?i[a]=s?c:"".concat(c/100,"rem"):i[a]=c}),i}setConfig(e,r){var i,s;this.dsl=e,!r&&e.items.length&&(r=e.items[0].id),this.dataSourceManager&&this.dataSourceManager.destroy(),this.dataSourceManager=fu(this,this.useMock),this.codeDsl=e.codeBlocks,this.setPage(r||((s=(i=this.page)==null?void 0:i.data)==null?void 0:s.id))}addPage(){console.info("addPage 已经弃用")}setPage(e){var i,s;const r=(i=this.dsl)==null?void 0:i.items.find(o=>"".concat(o.id)==="".concat(e));if(!r){this.page&&(this.page.destroy(),this.page=void 0),super.emit("page-change");return}r!==((s=this.page)==null?void 0:s.data)&&(this.page&&this.page.destroy(),this.page=new bu({config:r,app:this}),super.emit("page-change",this.page),this.bindEvents())}deletePage(){this.page=void 0}getPage(e){if(!e)return this.page;if(this.page&&"".concat(this.page.data.id)==="".concat(e))return this.page}registerComponent(e,r){this.components.set(e,r)}unregisterComponent(e){this.components.delete(e)}resolveComponent(e){return this.components.get(e)}bindEvents(){var e;if(Array.from(this.eventList.keys()).forEach(r=>{const i=this.eventList.get(r);i&&this.off(i,r)}),this.eventList.clear(),!!this.page)for(const[,r]of this.page.nodes)(e=r.events)==null||e.forEach(i=>{const s="".concat(i.name,"_").concat(r.data.id),o=(a,...c)=>{this.eventHandler(i,a,c)};this.eventList.set(o,s),this.on(s,o)})}emit(e,...r){var o;const[i,...s]=r;return i instanceof ce&&((o=i==null?void 0:i.data)!=null&&o.id)?super.emit("".concat(String(e),"_").concat(i.data.id),i,...s):super.emit(e,...r)}async codeActionHandler(e,r){var o;const{codeId:i="",params:s={}}=e;!i||Xn(this.codeDsl)||this.codeDsl[i]&&typeof((o=this.codeDsl[i])==null?void 0:o.content)=="function"&&await this.codeDsl[i].content({app:this,params:s,eventParams:r})}async compActionHandler(e,r,i){if(!this.page)throw new Error("当前没有页面");const{method:s,to:o}=e,a=this.page.getNode(o);if(!a)throw"ID为".concat(o,"的组件不存在");if(lu(s))return gu(s,a);a.instance?typeof a.instance[s]=="function"&&await a.instance[s](r,...i):this.addEventToMap({eventConfig:e,fromCpt:r,args:i})}async dataSourceActionHandler(e,r){var f;const{dataSourceMethod:i=[],params:s={}}=e,[o,a]=i;if(!o||!a)return;const c=(f=this.dataSourceManager)==null?void 0:f.get(o);if(!c)return;const h=(c.methods||[]).find(_=>_.name===a);h&&typeof h.content=="function"&&await h.content({app:this,params:s,dataSource:c,eventParams:r})}destroy(){this.removeAllListeners(),this.page=void 0,this.jsEngine==="browser"&&globalThis.removeEventListener("resize",this.calcFontsize)}async eventHandler(e,r,i){if(Sc(e,"actions")){const{actions:s}=e;for(const o of s)o.actionType===Pt.COMP?await this.compActionHandler(o,r,i):o.actionType===Pt.CODE?await this.codeActionHandler(o,i):o.actionType===Pt.DATA_SOURCE&&await this.dataSourceActionHandler(o,i)}else await this.compActionHandler(e,r,i)}addEventToMap(e){this.eventQueueMap[e.eventConfig.to]?this.eventQueueMap[e.eventConfig.to].push(e):this.eventQueueMap[e.eventConfig.to]=[e]}getTransform(e){if(!e)return[];const r=Object.entries(e).map(([s,o])=>o.trim()?(s==="rotate"&&wu(o)&&(o="".concat(o,"deg")),this.jsEngine!=="hippy"?"".concat(s,"(").concat(o,")"):{[s]:o}):"");if(this.jsEngine==="hippy")return r;const i=r.join(" ");return i.trim()?i:"none"}calcFontsize(){const{width:e}=document.documentElement.getBoundingClientRect(),r=e/(this.designWidth/100);document.documentElement.style.fontSize="".concat(r,"px")}}const Su=Ou,Tu=Vue.defineComponent({__name:"App",setup(t){var o;const n=Vue.inject("app"),e=Vue.ref(),r=Vue.ref(),i=Vue.ref(),s=Vue.computed(()=>{var a,c,u,h;return((c=(a=e.value)==null?void 0:a.items)==null?void 0:c.find(f=>f.id===r.value))||((h=(u=e.value)==null?void 0:u.items)==null?void 0:h[0])});return Vue.watch(s,async()=>{await Vue.nextTick();const a=document.querySelector(".magic-ui-page");a&&window.magic.onPageElUpdate(a)}),(o=window.magic)==null||o.onRuntimeReady({getApp(){return n},updateRootConfig(a){e.value=a,n==null||n.setConfig(a,r.value)},updatePageId(a){r.value=a,n==null||n.setPage(a)},select(a){var u;i.value=a,n!=null&&n.getPage(a)&&((u=this.updatePageId)==null||u.call(this,a));const c=document.getElementById("".concat(a));return c||Vue.nextTick().then(()=>document.getElementById("".concat(a)))},add({config:a,parentId:c}){var h,f,_,j,M;if(!e.value)throw new Error("error");if(!i.value)throw new Error("error");if(!c)throw new Error("error");const u=bt(c,[e.value]).pop();if(!u)throw new Error("未找到父节点");if(a.type!=="page"){const g=(h=n==null?void 0:n.page)==null?void 0:h.getNode(u.id);g&&((f=n==null?void 0:n.page)==null||f.initNode(a,g))}if(u.id!==i.value){const g=(_=u.items)==null?void 0:_.findIndex(S=>S.id===i.value);(j=u.items)==null||j.splice(g+1,0,a)}else(M=u.items)==null||M.push(a)},update({config:a,parentId:c}){var f,_;if(!e.value||!n)throw new Error("error");const u=((f=n.dataSourceManager)==null?void 0:f.compiledNode(a))||a;ae(Vue.reactive(u),[e.value],c);const h=(_=n.page)==null?void 0:_.getNode(a.id);h&&h.setData(a)},remove({id:a,parentId:c}){var _,j;if(!e.value)throw new Error("error");const u=bt(a,[e.value]).pop();if(!u)throw new Error("未找到目标元素");const h=bt(c,[e.value]).pop();if(!h)throw new Error("未找到父元素");u.type==="page"?n==null||n.deletePage():(_=n==null?void 0:n.page)==null||_.deleteNode(u.id);const f=(j=h.items)==null?void 0:j.findIndex(M=>M.id===u.id);h.items.splice(f,1)}}),(a,c)=>{const u=Vue.resolveComponent("magic-ui-page");return s.value?(Vue.openBlock(),Vue.createBlock(u,{key:s.value.id,config:s.value},null,8,["config"])):Vue.createCommentVNode("",!0)}}});Promise.all([Qt(()=>import("./comp-entry-qaRO00K0.js"),__vite__mapDeps([0,1])),Qt(()=>import("./plugin-entry-YvMT15k-.js"),__vite__mapDeps([])),Qt(()=>import("./datasource-entry-OfwQwX0w.js"),__vite__mapDeps([]))]).then(([t,n,e])=>{const r=Vue.createApp(Tu);Object.entries(t.default).forEach(([s,o])=>{r.component("magic-ui-".concat(s),o)}),Object.entries(e).forEach(([s,o])=>{ur.registe(s,o)}),Object.values(n.default).forEach(s=>{r.use(s)});const i=new Su({ua:window.navigator.userAgent,platform:"editor"});i.env.isWeb&&i.setDesignWidth(window.document.documentElement.getBoundingClientRect().width),window.appInstance=i,r.config.globalProperties.app=i,r.provide("app",i),r.mount("#app")});export{Mu as __vite_legacy_guard,Au as t};
//# sourceMappingURL=index-eGNLJl8t.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/comp-entry-qaRO00K0.js","assets/comp-entry-8rTPf1nS.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}